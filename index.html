<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ë”± í•„ìš”í•œ ì‚¬ì´íŠ¸ ëª¨ìŒ â€” ë·°ì–´ ë²„ì „</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  color: #333;
  transition: all 0.3s ease;
}
body.dark {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  color: #fff;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  background: rgba(255,255,255,0.95);
  border-radius: 20px;
  backdrop-filter: blur(10px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.1);
  overflow: hidden;
}
body.dark .container {
  background: rgba(26,26,46,0.95);
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

/* header */
.header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 30px;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.header h1 { margin:0 0 8px 0; font-size:2.4em; font-weight:700; }
.header p { margin:0; opacity:0.95; }

/* top controls: ê²€ìƒ‰ + ë‹¤í¬ í† ê¸€ */
.top-controls {
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  padding:18px 24px;
  background: rgba(248,249,250,0.85);
  border-bottom:1px solid #e9ecef;
  flex-wrap:wrap;
}
body.dark .top-controls { background: rgba(40,40,60,0.6); border-bottom-color:#444; }
.search-box {
  display:flex;
  gap:8px;
  align-items:center;
  flex:1;
  min-width:220px;
}
.search-box input {
  width:100%;
  padding:12px 14px;
  border-radius:10px;
  border:2px solid #e9ecef;
  box-sizing:border-box;
  font-size:14px;
}
.search-box input:focus { outline:none; border-color:#667eea; box-shadow:0 0 0 4px rgba(102,126,234,0.08); }
.filter-tabs {
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
}
.tab-btn {
  padding:10px 14px;
  border-radius:18px;
  border:2px solid #e9ecef;
  background:white;
  cursor:pointer;
  font-weight:600;
}
.tab-btn.active { background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:white; border-color:#667eea; box-shadow:0 6px 20px rgba(102,126,234,0.18); }
.dark-toggle { padding:10px 14px; border-radius:12px; background:linear-gradient(135deg,#343a40 0%,#212529 100%); color:white; border:none; cursor:pointer; }
.view-all-btn {
  padding: 10px 18px;
  border-radius: 10px;
  border: 2px solid #e9ecef;
  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
  color: white;
  cursor: pointer;
  font-weight: 700;
  margin-left: 12px;
}
.view-all-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(118, 75, 162, 0.3);
}

/* filters area (age & subject simplified) */
.filters {
  padding:18px 24px;
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;
  background: rgba(248,249,250,0.55);
  border-bottom:1px solid #e9ecef;
}
body.dark .filters { background: rgba(40,40,60,0.45); border-bottom-color:#444; }
.filter-group { display:flex; flex-direction:column; gap:8px; min-width:120px; }
.filter-buttons { display:flex; gap:8px; flex-wrap:wrap; }
.filter-btn { padding:8px 12px; border-radius:16px; border:2px solid #e9ecef; background:white; cursor:pointer; font-weight:600; }
.filter-btn.active { background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:white; border-color:#667eea; }

/* stats */
.stats { display:flex; gap:18px; align-items:center; padding:12px 24px; color:#6c757d; background: rgba(248,249,250,0.28); }
body.dark .stats { color:#adb5bd; background: rgba(30,30,40,0.28); }
.stats-item { display:flex; gap:8px; align-items:center; }

/* categories grid */
.categories-container { padding:24px; display:grid; grid-template-columns:repeat(auto-fit,minmax(350px,1fr)); gap:20px; }
.category-section { background:white; border-radius:14px; overflow:hidden; border:1px solid #e9ecef; transition:all .25s ease; box-shadow:0 6px 20px rgba(0,0,0,0.06); }
body.dark .category-section { background:#2d2d2d; border-color:#444; box-shadow:0 8px 30px rgba(0,0,0,0.28); }
.category-header { padding:16px 20px; font-weight:700; display:flex; justify-content:space-between; align-items:center; gap:12px; background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; }
.category-content { padding:18px; }
.link-card { border-radius:12px; padding:16px; margin:12px 0; background:linear-gradient(135deg,#ffffff 0%,#f8f9fa 100%); border:2px solid #f1f3f5; position:relative; transition:all .2s ease; }
body.dark .link-card { background:linear-gradient(135deg,#343a40 0%,#495057 100%); border-color:#444; }
.link-card:hover { transform:translateY(-3px); box-shadow:0 10px 25px rgba(102,126,234,0.12); border-color:#667eea; }
.link-card a { text-decoration:none; font-weight:700; display:inline-block; color:#2c3e50; font-size:18px; }
body.dark .link-card a { color:#f8f9fa; }
.link-card p { margin:8px 0 0; color:#6c757d; }
body.dark .link-card p { color:#adb5bd; }
.tag { padding:4px 10px; border-radius:12px; font-size:12px; font-weight:700; margin-right:6px; display:inline-block; }
.age-tag { background:linear-gradient(135deg,#d4edda 0%,#c3e6cb 100%); color:#155724; }
.category-tag { background:linear-gradient(135deg,#fff3cd 0%,#ffeaa7 100%); color:#856404; }
body.dark .age-tag { background:linear-gradient(135deg,#28a745 0%,#20c997 100%); color:white; }
body.dark .category-tag { background:linear-gradient(135deg,#ffc107 0%,#fd7e14 100%); color:#212529; }

/* more/collapse */
.more-btn-container { text-align:center; margin-top:12px; }
.more-btn, .collapse-btn { padding:10px 18px; border-radius:22px; border:2px solid #dee2e6; background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%); cursor:pointer; font-weight:700; }
.more-btn:hover, .collapse-btn:hover { background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:white; border-color:#667eea; }

/* no results */
.no-results { padding:40px; text-align:center; font-style:italic; color:#6c757d; }

/* responsive */
@media (max-width:768px) {
  .categories-container { grid-template-columns:1fr; padding:16px; }
  .header h1 { font-size:1.8em; }
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸŒŸ ë”±í•„ëª¨ </h1>
    <p>ë”± í•™ìƒë“¤ì—ê²Œ í•„ìš”í•  ë§Œí•œ ì‚¬ì´íŠ¸ë§Œ ê¹”ë”í•˜ê²Œ ëª¨ì•„ë´¤ì–´ìš” *ì•„ì§ ê°œë°œì¤‘ ì…ë‹ˆë‹¤. ë” ì¶”ê°€ë  ì˜ˆì •* </p>
  </div>

  <div class="top-controls">
    <div class="search-box" style="margin-right:12px;">
      <input id="searchInput" placeholder="ì‚¬ì´íŠ¸ ì´ë¦„ ë˜ëŠ” ì„¤ëª…ìœ¼ë¡œ ê²€ìƒ‰í•˜ì„¸ìš” â€” ì˜ˆ: Khan, ë²ˆì—­..." />
    </div>

    <div class="filter-tabs" id="filterTabs">
      </div>
    
    <button class="dark-toggle" id="darkToggle">ğŸŒ™ ë‹¤í¬ ëª¨ë“œ</button>
  </div>

  <div class="filters">
    <div class="filter-group">
      <label>ğŸ¯ ì—°ë ¹ëŒ€</label>
      <div class="filter-buttons" id="ageFilter">
        <button class="filter-btn active" data-age="all">ì „ì²´</button>
        <button class="filter-btn" data-age="elem">ì´ˆë“±</button>
        <button class="filter-btn" data-age="mid">ì¤‘ë“±</button>
        <button class="filter-btn" data-age="high">ê³ ë“±</button>
        <button class="filter-btn" data-age="adult">ì„±ì¸</button>
      </div>
    </div>

    <div class="filter-group">
      <label>ğŸ“š ê³¼ëª©</label>
      <select id="subjectFilter" style="padding:10px;border-radius:10px;border:2px solid #e9ecef;">
        <option value="all">ì „ì²´ ê³¼ëª©</option>
        <option value="korean">êµ­ì–´</option>
        <option value="math">ìˆ˜í•™</option>
        <option value="english">ì˜ì–´</option>
        <option value="science">ê³¼í•™</option>
        <option value="social">ì‚¬íšŒ</option>
        <option value="history">ì—­ì‚¬</option>
        <option value="art">ì˜ˆìˆ </option>
        <option value="music">ìŒì•…</option>
        <option value="pe">ì²´ìœ¡</option>
        <option value="tech">ê¸°ìˆ </option>
        <option value="coding">ì½”ë”©</option>
        <option value="language">ì™¸êµ­ì–´</option>
        <option value="general">ì¢…í•©</option>
        <option value="exam">ì‹œí—˜ëŒ€ë¹„</option>
        <option value="career">ì§„ë¡œ</option>
      </select>
    </div>

    <div style="margin-left:auto;">
      <button onclick="resetFilters()" style="padding:10px 14px;border-radius:10px;border:none;background:#6c757d;color:white;cursor:pointer;">ğŸ”„ í•„í„° ì´ˆê¸°í™”</button>
    </div>
  </div>

  <div class="stats" id="statsBar">
    <div class="stats-item">ğŸ“Š ì´ <strong id="totalCount">0</strong>ê°œ ì‚¬ì´íŠ¸</div>
    <div class="stats-item">ğŸ” ê²€ìƒ‰ ê²°ê³¼: <strong id="filteredCount">0</strong>ê°œ</div>
    <button class="view-all-btn" id="viewAllBtn" style="margin-left: auto;">ğŸ“– ì „ì²´ ì‚¬ì´íŠ¸ ë³´ê¸°</button>
  </div>

  <div class="categories-container" id="categoriesContainer"></div>

  <div id="noResults" class="no-results" style="display:none;">
    <h3>ğŸ” ì¡°ê±´ì— ë§ëŠ” ì‚¬ì´íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
    <p>í•„í„°ë‚˜ ê²€ìƒ‰ì–´ë¥¼ ë°”ê¿”ë³´ì„¸ìš”.</p>
  </div>
</div>

<script>
/* ===== ë°ì´í„° & ì„¤ì • ===== */
const ageNames = {elem:"ì´ˆë“±í•™ìƒ", mid:"ì¤‘í•™ìƒ", high:"ê³ ë“±í•™ìƒ", adult:"ì„±ì¸"};
const subjectNames = {korean:"êµ­ì–´", math:"ìˆ˜í•™", english:"ì˜ì–´", science:"ê³¼í•™", social:"ì‚¬íšŒ", history:"ì—­ì‚¬", art:"ì˜ˆìˆ ", music:"ìŒì•…", pe:"ì²´ìœ¡", tech:"ê¸°ìˆ ", coding:"ì½”ë”©", language:"ì™¸êµ­ì–´", general:"ì¢…í•©", exam:"ì‹œí—˜ëŒ€ë¹„", career:"ì§„ë¡œ"};

/* ê¸°ë³¸ ì¹´í…Œê³ ë¦¬ (ê´€ë¦¬ì/ì»¤ìŠ¤í…€ ì œê±°) */
const defaultCategories = {
  learning: {name:"ì˜¨ë¼ì¸ê°•ì˜", icon:"ğŸ’»"},
  info: {name:"ì°¸ê³ ìë£Œ", icon:"ğŸ”"},
  exam: {name:"ì‹œí—˜/ê¸°ì¶œ", icon:"ğŸ“"},
  assignment: {name:"ê³¼ì œ/ë¦¬í¬íŠ¸", icon:"ğŸ“„"},
  gpt: {name:"GPT í™œìš©", icon:"ğŸ¤–"},
  coding: {name:"ì½”ë”©/IT", icon:"ğŸ’»"},
  career: {name:"ì§„ë¡œ/ëŒ€í•™", icon:"ğŸ“"},
  productivity: {name:"ìƒì‚°ì„±/ë„êµ¬", icon:"ğŸ› ï¸"},
  study: {name:"í•™ìŠµ ì „ëµ/ìŠ¤í„°ë””", icon:"ğŸ“Œ"},
  reading: {name:"ë…ì„œ/ë¬¸í•´ë ¥", icon:"ğŸ“–"},
  art: {name:"ì°½ì˜/ì˜ˆìˆ ", icon:"ğŸ¨"},
  explore: {name:"ì²´í—˜/íƒêµ¬", icon:"ğŸ”¬"}
};

/* ì´ˆê¸° ì‚¬ì´íŠ¸ + ì¹´í…Œê³ ë¦¬ë³„ ì˜ˆì‹œ ì‚¬ì´íŠ¸ 5ê°œì”© */
const initialSites = [
  /* ================== ì˜¨ë¼ì¸ê°•ì˜ ğŸ’» ================== */
  {name:"EBS ì´ˆë“±", url:"https://www.ebs.co.kr/course/home?courseType=ELMT", desc:"ì´ˆë“± ì „ ê³¼ëª© ì˜¨ë¼ì¸ ê°•ì˜", category:"learning", ages:["elem"], subjects:["korean","math","science","social"]},
  {name:"EBS ì¤‘ë“±", url:"https://www.ebs.co.kr/course/home?courseType=MIDD", desc:"ì¤‘í•™ìƒ ëŒ€ìƒ ì „ ê³¼ëª© ì˜¨ë¼ì¸ ê°•ì˜", category:"learning", ages:["mid"], subjects:["korean","math","science","social"]},
  {name:"ë©”ê°€ìŠ¤í„°ë””", url:"https://www.megastudy.net/", desc:"ì¤‘ê³ ë“± í•™ìƒ ëŒ€ìƒ ê°•ì˜", category:"learning", ages:["mid","high"], subjects:["korean","math","english","science"]},
  {name:"ìŠ¤í„°ë””íŒŒì´", url:"https://www.studypie.co.kr/", desc:"ì˜¨ë¼ì¸ ë§ì¶¤ í•™ìŠµ ì„œë¹„ìŠ¤", category:"learning", ages:["elem","mid","high"], subjects:["korean","math","english"]},
  {name:"ì•¼ë‚˜ë‘", url:"https://yanadoo.com/", desc:"ì˜ì–´ ë° ì¤‘êµ­ì–´ í•™ìŠµ", category:"learning", ages:["mid","high","adult"], subjects:["english","language"]},
  {name:"Coursera", url:"https://www.coursera.org/", desc:"ì „ ì„¸ê³„ ëŒ€í•™ ë° ê¸°ì—…ì˜ ì˜¨ë¼ì¸ ê°•ì¢Œ", category:"learning", ages:["high","adult"], subjects:["general","language"]},
  {name:"edX", url:"https://www.edx.org/", desc:"ë¬´ë£Œ ë° ìœ ë£Œ ëŒ€í•™ ì˜¨ë¼ì¸ ê°•ì˜ ì œê³µ", category:"learning", ages:["high","adult"], subjects:["general"]},
  {name:"TED-Ed", url:"https://ed.ted.com/", desc:"ì§§ì€ ì˜ìƒ ê°•ì˜ë¡œ ë‹¤ì–‘í•œ ì§€ì‹ í•™ìŠµ", category:"learning", ages:["mid","high"], subjects:["general"]},
  {name:"MIT OpenCourseWare", url:"https://ocw.mit.edu/", desc:"MIT ê³µê°œ ê°•ì˜ ìë£Œ", category:"learning", ages:["high","adult"], subjects:["science","tech"]},
  {name:"Skillshare", url:"https://www.skillshare.com/", desc:"ë””ìì¸, ì½”ë”©, ì˜ìƒ ë“± ì‹¤ë¬´ í•™ìŠµ", category:"learning", ages:["high","adult"], subjects:["art","tech"]},

  /* ================== ì°¸ê³ ìë£Œ ğŸ” ================== */
  {name:"ìœ„í‚¤ë°±ê³¼", url:"https://ko.wikipedia.org/", desc:"ììœ  ë°±ê³¼ì‚¬ì „", category:"info", ages:["mid","high","adult"], subjects:["general"]},
  {name:"ë‚˜ë¬´ìœ„í‚¤", url:"https://namu.wiki/", desc:"ë‹¤ì–‘í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ëŠ” í•œêµ­ì–´ ìœ„í‚¤", category:"info", ages:["mid","high","adult"], subjects:["general"]},
  {name:"êµ­ë¦½ì¤‘ì•™ê³¼í•™ê´€", url:"https://www.science.go.kr/", desc:"ê³¼í•™ ì²´í—˜ ë° êµìœ¡ ì •ë³´", category:"info", ages:["elem","mid","high"], subjects:["science"]},
  {name:"RISS", url:"http://www.riss.kr/", desc:"í•™ìˆ  ìë£Œ ë° ë…¼ë¬¸ ê²€ìƒ‰", category:"info", ages:["high","adult"], subjects:["general"]},
  {name:"êµ­ë¦½ì¤‘ì•™ë„ì„œê´€", url:"https://www.nl.go.kr/", desc:"ë””ì§€í„¸ ìë£Œ ë° ìë£Œ ê²€ìƒ‰", category:"info", ages:["mid","high","adult"], subjects:["general"]},
  {name:"êµ­ê°€ê³¼í•™ê¸°ìˆ ì •ë³´ì„¼í„°", url:"https://www.ntis.go.kr/", desc:"ê³¼í•™/ê¸°ìˆ  ìë£Œ ê²€ìƒ‰", category:"info", ages:["mid","high","adult"], subjects:["science","tech"]},

  /* ================== ì‹œí—˜/ê¸°ì¶œ ğŸ“ ================== */
  {name:"í† ìµ ê³µì‹ ì‚¬ì´íŠ¸", url:"https://www.toeic.co.kr/", desc:"í† ìµ ì‹œí—˜ ìë£Œ", category:"exam", ages:["high","adult"], subjects:["exam"]},
  {name:"ì»´í“¨í„° í™œìš©ëŠ¥ë ¥ ê¸°ì¶œ", url:"https://www.q-net.or.kr", desc:"ì»´í“¨í„° í™œìš©ëŠ¥ë ¥ ì‹œí—˜ ê¸°ì¶œ ë¬¸ì œ", category:"exam", ages:["high","adult"], subjects:["exam"]},
  {name:"í•œêµ­ì‚¬ ëŠ¥ë ¥ê²€ì •ì‹œí—˜", url:"https://www.historyexam.go.kr/", desc:"í•œêµ­ì‚¬ ì‹œí—˜ ëŒ€ë¹„ ìë£Œ", category:"exam", ages:["mid","high"], subjects:["exam"]},
  {name:"ìˆ˜ëŠ¥ ëª¨ì˜ê³ ì‚¬ ìë£Œ", url:"https://www.kice.re.kr/", desc:"ìˆ˜ëŠ¥ ê¸°ì¶œ ë° ëª¨ì˜ê³ ì‚¬ ìë£Œ", category:"exam", ages:["high"], subjects:["exam"]},
  {name:"SAT Practice", url:"https://collegereadiness.collegeboard.org/sat/practice", desc:"SAT ì‹œí—˜ ì—°ìŠµ ì‚¬ì´íŠ¸", category:"exam", ages:["high","adult"], subjects:["exam","english"]},
  {name:"EBS ìˆ˜ëŠ¥íŠ¹ê°•", url:"https://www.ebs.co.kr/special/suneung", desc:"ìˆ˜ëŠ¥ ëŒ€ë¹„ ì˜¨ë¼ì¸ ê°•ì˜", category:"exam", ages:["high"], subjects:["exam","korean","math","english"]},

  /* ================== ê³¼ì œ/ë¦¬í¬íŠ¸ ğŸ“„ ================== */
  {name:"DBpia", url:"https://www.dbpia.co.kr/", desc:"í•™ìˆ  ë…¼ë¬¸ ë° ìë£Œ ê²€ìƒ‰", category:"assignment", ages:["high","adult"], subjects:["general","science","social"]},
  {name:"ì—ë“€ë„·", url:"https://www.edunet.net/", desc:"í•™êµ ê³¼ì œ ìë£Œ ë° í•™ìŠµ ìë£Œ", category:"assignment", ages:["elem","mid","high"], subjects:["general","korean","math"]},
  {name:"ë„¤ì´ë²„ í•™ìˆ ì •ë³´", url:"https://academic.naver.com/", desc:"ë…¼ë¬¸ ë° ì—°êµ¬ìë£Œ ê²€ìƒ‰", category:"assignment", ages:["high","adult"], subjects:["general"]},
  {name:"êµ­ë¦½ì¤‘ì•™ë„ì„œê´€ í•™ìˆ ì •ë³´", url:"https://www.nl.go.kr/", desc:"ë¦¬í¬íŠ¸ ì°¸ê³ ìë£Œ ì œê³µ", category:"assignment", ages:["mid","high","adult"], subjects:["general"]},
  {name:"RISS", url:"http://www.riss.kr/", desc:"ë…¼ë¬¸ ë° ë ˆí¬íŠ¸ ìë£Œ", category:"assignment", ages:["high","adult"], subjects:["general"]},

  // ================== GPT í™œìš© ì˜ˆì‹œ ì‚¬ì´íŠ¸ ==================
  {name:"ChatGPT", url:"https://chat.openai.com/", desc:"GPT 5ê°€ í˜¸ë“¤ê°‘ ë–¤ê±° ìƒê°í•˜ë©´ ì„±ëŠ¥ì´... ì•„ë¬´íŠ¼ í˜„ì¡´ ìµœê°•* ì´ˆê¸° ì‚¬ì´íŠ¸ + ì¹´í…Œê³ ë¦¬ë³„ ì˜ˆì‹œ ì‚¬ì´íŠ¸ 5ê°œì”© */
const initialSites = [
  /* ================== ì˜¨ë¼ì¸ê°•ì˜ ğŸ’» ================== */
  {name:"EBS ì´ˆë“±", url:"https://www.ebs.co.kr/course/home?courseType=ELMT", desc:"ì´ˆë“± ì „ ê³¼ëª© ì˜¨ë¼ì¸ ê°•ì˜", category:"learning", ages:["elem"], subjects:["korean","math","science","social"]},
  {name:"EBS ì¤‘ë“±", url:"https://www.ebs.co.kr/course/home?courseType=MIDD", desc:"ì¤‘í•™ìƒ ëŒ€ìƒ ì „ ê³¼ëª© ì˜¨ë¼ì¸ ê°•ì˜", category:"learning", ages:["mid"], subjects:["korean","math","science","social"]},
  {name:"ë©”ê°€ìŠ¤í„°ë””", url:"https://www.megastudy.net/", desc:"ì¤‘ê³ ë“± í•™ìƒ ëŒ€ìƒ ê°•ì˜", category:"learning", ages:["mid","high"], subjects:["korean","math","english","science"]},
  {name:"ìŠ¤í„°ë””íŒŒì´", url:"https://www.studypie.co.kr/", desc:"ì˜¨ë¼ì¸ ë§ì¶¤ í•™ìŠµ ì„œë¹„ìŠ¤", category:"learning", ages:["elem","mid","high"], subjects:["korean","math","english"]},
  {name:"ì•¼ë‚˜ë‘", url:"https://yanadoo.com/", desc:"ì˜ì–´ ë° ì¤‘êµ­ì–´ í•™ìŠµ", category:"learning", ages:["mid","high","adult"], subjects:["english","language"]},
  {name:"Coursera", url:"https://www.coursera.org/", desc:"ì „ ì„¸ê³„ ëŒ€í•™ ë° ê¸°ì—…ì˜ ì˜¨ë¼ì¸ ê°•ì¢Œ", category:"learning", ages:["high","adult"], subjects:["general","language"]},
  {name:"edX", url:"https://www.edx.org/", desc:"ë¬´ë£Œ ë° ìœ ë£Œ ëŒ€í•™ ì˜¨ë¼ì¸ ê°•ì˜ ì œê³µ", category:"learning", ages:["high","adult"], subjects:["general"]},
  {name:"TED-Ed", url:"https://ed.ted.com/", desc:"ì§§ì€ ì˜ìƒ ê°•ì˜ë¡œ ë‹¤ì–‘í•œ ì§€ì‹ í•™ìŠµ", category:"learning", ages:["mid","high"], subjects:["general"]},
  {name:"MIT OpenCourseWare", url:"https://ocw.mit.edu/", desc:"MIT ê³µê°œ ê°•ì˜ ìë£Œ", category:"learning", ages:["high","adult"], subjects:["science","tech"]},
  {name:"Skillshare", url:"https://www.skillshare.com/", desc:"ë””ìì¸, ì½”ë”©, ì˜ìƒ ë“± ì‹¤ë¬´ í•™ìŠµ", category:"learning", ages:["high","adult"], subjects:["art","tech"]},

  /* ================== ì°¸ê³ ìë£Œ ğŸ” ================== */
  {name:"ìœ„í‚¤ë°±ê³¼", url:"https://ko.wikipedia.org/", desc:"ììœ  ë°±ê³¼ì‚¬ì „", category:"info", ages:["mid","high","adult"], subjects:["general"]},
  {name:"ë‚˜ë¬´ìœ„í‚¤", url:"https://namu.wiki/", desc:"ë‹¤ì–‘í•œ ì£¼ì œë¥¼ ë‹¤ë£¨ëŠ” í•œêµ­ì–´ ìœ„í‚¤", category:"info", ages:["mid","high","adult"], subjects:["general"]},
  {name:"êµ­ë¦½ì¤‘ì•™ê³¼í•™ê´€", url:"https://www.science.go.kr/", desc:"ê³¼í•™ ì²´í—˜ ë° êµìœ¡ ì •ë³´", category:"info", ages:["elem","mid","high"], subjects:["science"]},
  {name:"RISS", url:"http://www.riss.kr/", desc:"í•™ìˆ  ìë£Œ ë° ë…¼ë¬¸ ê²€ìƒ‰", category:"info", ages:["high","adult"], subjects:["general"]},
  {name:"êµ­ë¦½ì¤‘ì•™ë„ì„œê´€", url:"https://www.nl.go.kr/", desc:"ë””ì§€í„¸ ìë£Œ ë° ìë£Œ ê²€ìƒ‰", category:"info", ages:["mid","high","adult"], subjects:["general"]},
  {name:"êµ­ê°€ê³¼í•™ê¸°ìˆ ì •ë³´ì„¼í„°", url:"https://www.ntis.go.kr/", desc:"ê³¼í•™/ê¸°ìˆ  ìë£Œ ê²€ìƒ‰", category:"info", ages:["mid","high","adult"], subjects:["science","tech"]},

  /* ================== ì‹œí—˜/ê¸°ì¶œ ğŸ“ ================== */
  {name:"í† ìµ ê³µì‹ ì‚¬ì´íŠ¸", url:"https://www.toeic.co.kr/", desc:"í† ìµ ì‹œí—˜ ìë£Œ", category:"exam", ages:["high","adult"], subjects:["exam"]},
  {name:"ì»´í“¨í„° í™œìš©ëŠ¥ë ¥ ê¸°ì¶œ", url:"https://www.q-net.or.kr", desc:"ì»´í“¨í„° í™œìš©ëŠ¥ë ¥ ì‹œí—˜ ê¸°ì¶œ ë¬¸ì œ", category:"exam", ages:["high","adult"], subjects:["exam"]},
  {name:"í•œêµ­ì‚¬ ëŠ¥ë ¥ê²€ì •ì‹œí—˜", url:"https://www.historyexam.go.kr/", desc:"í•œêµ­ì‚¬ ì‹œí—˜ ëŒ€ë¹„ ìë£Œ", category:"exam", ages:["mid","high"], subjects:["exam"]},
  {name:"ìˆ˜ëŠ¥ ëª¨ì˜ê³ ì‚¬ ìë£Œ", url:"https://www.kice.re.kr/", desc:"ìˆ˜ëŠ¥ ê¸°ì¶œ ë° ëª¨ì˜ê³ ì‚¬ ìë£Œ", category:"exam", ages:["high"], subjects:["exam"]},
  {name:"SAT Practice", url:"https://collegereadiness.collegeboard.org/sat/practice", desc:"SAT ì‹œí—˜ ì—°ìŠµ ì‚¬ì´íŠ¸", category:"exam", ages:["high","adult"], subjects:["exam","english"]},
  {name:"EBS ìˆ˜ëŠ¥íŠ¹ê°•", url:"https://www.ebs.co.kr/special/suneung", desc:"ìˆ˜ëŠ¥ ëŒ€ë¹„ ì˜¨ë¼ì¸ ê°•ì˜", category:"exam", ages:["high"], subjects:["exam","korean","math","english"]},

  /* ================== ê³¼ì œ/ë¦¬í¬íŠ¸ ğŸ“„ ================== */
  {name:"DBpia", url:"https://www.dbpia.co.kr/", desc:"í•™ìˆ  ë…¼ë¬¸ ë° ìë£Œ ê²€ìƒ‰", category:"assignment", ages:["high","adult"], subjects:["general","science","social"]},
  {name:"ì—ë“€ë„·", url:"https://www.edunet.net/", desc:"í•™êµ ê³¼ì œ ìë£Œ ë° í•™ìŠµ ìë£Œ", category:"assignment", ages:["elem","mid","high"], subjects:["general","korean","math"]},
  {name:"ë„¤ì´ë²„ í•™ìˆ ì •ë³´", url:"https://academic.naver.com/", desc:"ë…¼ë¬¸ ë° ì—°êµ¬ìë£Œ ê²€ìƒ‰", category:"assignment", ages:["high","adult"], subjects:["general"]},
  {name:"êµ­ë¦½ì¤‘ì•™ë„ì„œê´€ í•™ìˆ ì •ë³´", url:"https://www.nl.go.kr/", desc:"ë¦¬í¬íŠ¸ ì°¸ê³ ìë£Œ ì œê³µ", category:"assignment", ages:["mid","high","adult"], subjects:["general"]},
  {name:"RISS", url:"http://www.riss.kr/", desc:"ë…¼ë¬¸ ë° ë ˆí¬íŠ¸ ìë£Œ", category:"assignment", ages:["high","adult"], subjects:["general"]},

  // ================== GPT í™œìš© ì˜ˆì‹œ ì‚¬ì´íŠ¸ ==================
  {name:"ChatGPT", url:"https://chat.com/", desc:"GPT 5ê°€ í˜¸ë“¤ê°‘ ë–¤ê±° ìƒê°í•˜ë©´ ì„±ëŠ¥ì´... ì•„ë¬´íŠ¼ í˜„ì¡´ ìµœê°•", category:"gpt", ages:["mid","high","adult"], subjects:["general"]},
  {name:"Gemini", url:"https://gemini.google.com/", desc:"ì¼ë¯¸ë‹ˆ", category:"gpt", ages:["mid","high","adult"], subjects:["general"]},
  {name:"Claude", url:"https://claude.ai/", desc:"GPT ë³´ë‹¨ ì½”ë”© ì˜í•¨", category:"gpt", ages:["mid","high","adult"], subjects:["general"]},
  {name:"Grok", url:"https://grok.com/", desc:"ë¨¸ìŠ¤í¬ í˜•ì˜ ì±—ì§€í”¼í‹° ì´ìƒì˜ GPT", category:"gpt", ages:["mid","high","adult"], subjects:["general"]},
  {name:"Perplexity", url:"https://www.perplexity.ai/", desc:"ì •ë³´ ì°¾ëŠ” GPT(ì´ê±° ì“¸ë°”ì—” ë‹¤ë¥¸ê±° ì“°ê¸´í•¨)", category:"gpt", ages:["mid","high","adult"], subjects:["general"]},
  {name:"Gamma", url:"https://gamma.app/", desc:"PPT ì œì‘ ë…¸ì˜ˆ", category:"gpt", ages:["mid","high","adult"], subjects:["general"]},

  /* ================== ì½”ë”©/IT ğŸ’» ================== */
  {name:"Inflearn", url:"https://www.inflearn.com/", desc:"êµ­ë‚´ ì˜¨ë¼ì¸ IT/ì½”ë”© ê°•ì˜", category:"coding", ages:["mid","high","adult"], subjects:["coding","tech"]},
  {name:"CodeUp", url:"https://codeup.kr/", desc:"ì½”ë”© í…ŒìŠ¤íŠ¸ ë° ì•Œê³ ë¦¬ì¦˜ ì—°ìŠµ", category:"coding", ages:["mid","high","adult"], subjects:["coding"]},
  {name:"Programmers", url:"https://programmers.co.kr/", desc:"ê°œë°œì ì‹¤ìŠµ/ìŠ¤í„°ë””", category:"coding", ages:["high","adult"], subjects:["coding","tech"]},
  {name:"ìƒí™œì½”ë”©", url:"https://opentutorials.org/", desc:"ë¬´ë£Œ ì½”ë”© í•™ìŠµ", category:"coding", ages:["elem","mid","high","adult"], subjects:["coding"]},
  {name:"Fast Campus Coding", url:"https://fastcampus.co.kr/dev_online", desc:"ì‹¤ë¬´ ì½”ë”© ê°•ì˜", category:"coding", ages:["high","adult"], subjects:["coding","tech"]},

  /* ================== ì§„ë¡œ/ëŒ€í•™ ğŸ“ ================== */
  {name:"ì§„ë¡œì§ì—…ì •ë³´ë§", url:"https://www.career.go.kr/", desc:"ì§„ë¡œ ë° ì§ì—… ì •ë³´ ì œê³µ", category:"career", ages:["high","adult"], subjects:["career"]},
  {name:"ëŒ€í•™ì•Œë¦¬ë¯¸", url:"https://www.academyinfo.go.kr/", desc:"ëŒ€í•™ ì…í•™ ì •ë³´", category:"career", ages:["high","adult"], subjects:["career"]},
  {name:"ì»¤ë¦¬ì–´ë„·", url:"https://www.career.go.kr/", desc:"ì§„ë¡œ ìƒë‹´ ë° ì§ì—… ì •ë³´", category:"career", ages:["high","adult"], subjects:["career"]},
  {name:"ì—ë“€ìœŒ ì§„ë¡œ", url:"https://www.eduwill.net/", desc:"ì§„ë¡œÂ·ìê²©ì¦ ì •ë³´", category:"career", ages:["high","adult"], subjects:["career"]},
  {name:"ì§„í•™ì‚¬", url:"https://www.jinhak.com/", desc:"ëŒ€ì… ì •ë³´ ë° ìƒë‹´", category:"career", ages:["high"], subjects:["career"]},

  /* ================== ìƒì‚°ì„±/ë„êµ¬ ğŸ› ï¸ ================== */
  {name:"Notion", url:"https://www.notion.so/", desc:"ë…¸íŠ¸, í•™ìŠµ ê³„íš ë° ìë£Œ ì •ë¦¬", category:"productivity", ages:["mid","high","adult"], subjects:["general"]},
  {name:"Google Workspace", url:"https://workspace.google.com/", desc:"ë¬¸ì„œ, ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ë“± í•™ìŠµ ë„êµ¬", category:"productivity", ages:["mid","high","adult"], subjects:["general"]},
  {name:"ì¹´ì¹´ì˜¤ì›Œí¬", url:"https://www.kakaowork.com/", desc:"í˜‘ì—… ë° ìë£Œ ê³µìœ  ë„êµ¬", category:"productivity", ages:["mid","high","adult"], subjects:["general"]},
  {name:"Todoist", url:"https://todoist.com/", desc:"í•  ì¼ ê´€ë¦¬ ë° í•™ìŠµ ê³„íš", category:"productivity", ages:["mid","high","adult"], subjects:["general"]},
  {name:"ìº˜ë¦°ë”", url:"https://calendar.google.com/", desc:"ì‹œê°„ ê´€ë¦¬ ë° ì¼ì • ì •ë¦¬", category:"productivity", ages:["mid","high","adult"], subjects:["general"]},

  /* ================== í•™ìŠµ ì „ëµ/ìŠ¤í„°ë”” ğŸ“Œ ================== */
  {name:"ìŠ¤í„°ë””ì½”ë“œ", url:"https://www.studycod.com/", desc:"íš¨ìœ¨ì ì¸ ê³µë¶€ë²•ê³¼ ìŠ¤í„°ë”” ê°€ì´ë“œ ì œê³µ", category:"study", ages:["mid","high"], subjects:["general"]},
  {name:"ê³µë¶€ì˜ ì‹ ", url:"https://www.gongbune.co.kr/", desc:"ê³µë¶€ ê³„íš, ì‹œí—˜ ëŒ€ë¹„ ì „ëµ", category:"study", ages:["mid","high"], subjects:["general"]},
  {name:"ì—ë“€íŒ¡ í•™ìŠµì „ëµ", url:"https://www.edupang.com/", desc:"ë§ì¶¤í˜• í•™ìŠµ ì „ëµê³¼ íŒ ì œê³µ", category:"study", ages:["mid","high"], subjects:["general"]},
  {name:"í•™ìŠµë²• ì—°êµ¬ì†Œ", url:"https://www.learninglab.kr/", desc:"ê³¼ëª©ë³„ ê³µë¶€ë²• ë° ì‹œê°„ê´€ë¦¬", category:"study", ages:["mid","high"], subjects:["general"]},
  {name:"ì—´ê³µë‹·ì»´", url:"https://www.yeolgong.com/", desc:"ì‹œí—˜ ëŒ€ë¹„ ë° í•™ìŠµ íŒ ê³µìœ ", category:"study", ages:["mid","high"], subjects:["general"]},

  /* ================== ë…ì„œ/ë¬¸í•´ë ¥ ğŸ“– ================== */
  {name:"êµ­ë¦½ì–´ë¦°ì´ì²­ì†Œë…„ë„ì„œê´€", url:"https://www.kcyl.go.kr/", desc:"ì–´ë¦°ì´Â·ì²­ì†Œë…„ ë…ì„œìë£Œ ì œê³µ", category:"reading", ages:["elem","mid"], subjects:["korean","general"]},
  {name:"ë¦¬ë”©ê²Œì´íŠ¸", url:"https://www.readinggate.com/", desc:"ì˜¨ë¼ì¸ ì˜ì–´ ë…ì„œ í”„ë¡œê·¸ë¨", category:"reading", ages:["elem","mid"], subjects:["english","language"]},
  {name:"êµë³´ë¬¸ê³  eBook", url:"https://www.kyobobook.co.kr/ebook/", desc:"ì „ìì±… ë° í•™ìŠµìš© ë„ì„œ", category:"reading", ages:["elem","mid","high"], subjects:["korean","general"]},
  {name:"Yes24 ë…ì„œêµìœ¡", url:"https://www.yes24.com/Books/Edu", desc:"ì²­ì†Œë…„ ë§ì¶¤ ë…ì„œ ìë£Œ", category:"reading", ages:["mid","high"], subjects:["korean","general"]},
  {name:"ë‹¤ë…ë‹¤ë…", url:"https://www.dadokdadok.com/", desc:"ì²­ì†Œë…„ ë…ì„œ ê¸°ë¡ ë° ì¶”ì²œ", category:"reading", ages:["elem","mid"], subjects:["korean","general"]},

  /* ================== ì°½ì˜/ì˜ˆìˆ  ğŸ¨ ================== */
  {name:"ì„œìš¸ì‹œêµìœ¡ì²­ ì°½ì˜ì˜ˆìˆ ìë£Œ", url:"https://creative.sen.go.kr/", desc:"ë¯¸ìˆ Â·ìŒì•…Â·ì°½ì˜ í™œë™ ìë£Œ", category:"art", ages:["elem","mid","high"], subjects:["art","music"]},
  {name:"ì•„íŠ¸ì•¤ìŠ¤í„°ë””", url:"https://www.artnstudy.com/", desc:"ì˜ˆìˆ  ê°•ì¢Œ ë° ìë£Œ", category:"art", ages:["mid","high","adult"], subjects:["art","music"]},
  {name:"ë‘ì‚°ë°±ê³¼ ì˜ˆìˆ ", url:"https://www.doopedia.co.kr/", desc:"ì˜ˆìˆ  ê´€ë ¨ ì°¸ê³ ìë£Œ", category:"art", ages:["mid","high"], subjects:["art","music"]},
  {name:"í´ë˜ìŠ¤101 í•™ìƒìš©", url:"https://class101.net/", desc:"ë””ìì¸Â·ì˜ˆìˆ  ì˜¨ë¼ì¸ í´ë˜ìŠ¤", category:"art", ages:["mid","high","adult"], subjects:["art","design"]},
  {name:"ì˜ˆìˆ êµìœ¡í¬í„¸", url:"https://www.artedu.or.kr/", desc:"ì˜ˆìˆ  êµìœ¡ ìë£Œ ë° ì²´í—˜", category:"art", ages:["elem","mid","high"], subjects:["art","music"]},

  /* ================== ì²´í—˜/íƒêµ¬ ğŸ”¬ ================== */
  {name:"êµ­ë¦½ê³¼í•™ê´€", url:"https://www.science.go.kr/", desc:"ê³¼í•™ ì²´í—˜ ë° êµìœ¡ ìë£Œ", category:"explore", ages:["elem","mid","high"], subjects:["science"]},
  {name:"ì–´ë¦°ì´ë°•ë¬¼ê´€", url:"https://www.kidsmuseum.or.kr/", desc:"ì²­ì†Œë…„ ì²´í—˜ í•™ìŠµ ìë£Œ", category:"explore", ages:["elem","mid"], subjects:["science","social"]},
  {name:"í•œêµ­ë¯¼ì†ì´Œ", url:"https://www.koreanfolk.co.kr/", desc:"ì—­ì‚¬Â·ë¬¸í™” ì²´í—˜", category:"explore", ages:["elem","mid","high"], subjects:["social","history"]},
  {name:"ì„œìš¸ì‹œë¦½ê³¼í•™ê´€", url:"https://www.ssc.or.kr/", desc:"ê³¼í•™ ì‹¤í—˜ ë° ì „ì‹œ ìë£Œ", category:"explore", ages:["elem","mid","high"], subjects:["science"]},
  {name:"ì°½ì˜ì²´í—˜ë„·", url:"https://www.culture.go.kr/creative/", desc:"ì²­ì†Œë…„ ì°½ì˜ ì²´í—˜ í”„ë¡œê·¸ë¨", category:"explore", ages:["elem","mid","high"], subjects:["general","art","science"]}
];


/* ===== ë‚´ë¶€ ìƒíƒœ ===== */
let sites = [...initialSites];
let currentAgeFilter = "all";
let currentCategoryFilter = "all";
let currentSubjectFilter = "all";
let currentSearchQuery = "";
let expandedCategories = {};
const DEFAULT_DISPLAY_LIMIT = 5; // ê¸°ë³¸ ë…¸ì¶œ ê°œìˆ˜ (ìš”ì²­ëŒ€ë¡œ ì¼ì • ìˆ˜ì¤€ ì´ìƒì´ë©´ ë”ë³´ê¸° í‘œì‹œ)

/* ===== ìœ í‹¸ë¦¬í‹° ===== */
function getAllCategories() { return {...defaultCategories}; }
function getCategoryName(key) { const c = getAllCategories()[key]; return c ? c.name : key; }
function getCategoryIcon(key) { const c = getAllCategories()[key]; return c ? c.icon : "ğŸ“"; }

function updateStats() {
  document.getElementById("totalCount").textContent = sites.length;
  document.getElementById("filteredCount").textContent = getFilteredSites().length;
}

/* ===== í•„í„°ë§ & ê²€ìƒ‰ ===== */
function getFilteredSites() {
  const q = currentSearchQuery.trim().toLowerCase();
  return sites.filter(s => {
    if (currentAgeFilter !== "all" && !s.ages.includes(currentAgeFilter)) return false;
    if (currentCategoryFilter !== "all" && s.category !== currentCategoryFilter) return false;
    if (currentSubjectFilter !== "all" && !s.subjects.includes(currentSubjectFilter)) return false;
    if (q) {
      const hay = (s.name + " " + (s.desc || "")).toLowerCase();
      if (!hay.includes(q)) return false;
    }
    return true;
  });
}

/* ===== DOM ìƒì„±: ì¹´í…Œê³ ë¦¬ ì„¹ì…˜, ì¹´ë“œ, ë Œë”ë§ ===== */
function createCategorySection(categoryKey) {
  const allCategories = getAllCategories();
  const info = allCategories[categoryKey];
  if (!info) return null;
  const section = document.createElement("div");
  section.className = "category-section";
  section.id = `${categoryKey}-section`;
  section.innerHTML = `
    <div class="category-header">
      <div style="display:flex;align-items:center;gap:10px;">
        <span style="font-size:20px;">${info.icon}</span>
        <div>
          <div style="font-weight:800">${info.name}</div>
          <div style="font-size:12px;opacity:0.9">ì¹´í…Œê³ ë¦¬: ${categoryKey}</div>
        </div>
      </div>
      <div class="category-count" id="${categoryKey}-count">0</div>
    </div>
    <div class="category-content" id="${categoryKey}-content"></div>
  `;
  return section;
}

function createSiteCard(site) {
  const card = document.createElement("div");
  card.className = "link-card";
  const ageTags = site.ages.map(a => `<span class="tag age-tag">${ageNames[a]}</span>`).join(" ");
  const categoryTag = `<span class="tag category-tag">${getCategoryName(site.category)}</span>`;
  card.innerHTML = `
    <a href="${site.url}" target="_blank" rel="noopener">${escapeHtml(site.name)}</a>
    <div style="margin-top:10px;">${categoryTag} ${ageTags}</div>
    <p>${escapeHtml(site.desc || 'ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.')}</p>
  `;
  return card;
}

/* ì•ˆì „í•œ HTML ì´ìŠ¤ì¼€ì´í”„ */
function escapeHtml(str) {
  return String(str)
    .replace(/&/g,"&amp;")
    .replace(/</g,"&lt;")
    .replace(/>/g,"&gt;")
    .replace(/"/g,"&quot;")
    .replace(/'/g,"&#039;");
}

function renderCategorySections() {
  const container = document.getElementById("categoriesContainer");
  container.innerHTML = "";
  const keys = Object.keys(getAllCategories());
  keys.forEach(k => {
    const sec = createCategorySection(k);
    if (sec) container.appendChild(sec);
  });
}

function renderSites() {
  const allKeys = Object.keys(getAllCategories());
  const filtered = getFilteredSites();
  const hasResults = filtered.length > 0;

  allKeys.forEach(category => {
    const content = document.getElementById(`${category}-content`);
    const section = document.getElementById(`${category}-section`);
    const countEl = document.getElementById(`${category}-count`);
    if (!content || !section) return;

    const sitesInCategory = filtered.filter(s => s.category === category);
    content.innerHTML = "";
    if (countEl) countEl.textContent = sitesInCategory.length;

    if (sitesInCategory.length > 0) {
      section.style.display = "block";
      const limit = DEFAULT_DISPLAY_LIMIT;
      const isExpanded = expandedCategories[category];
      const toShow = isExpanded ? sitesInCategory : sitesInCategory.slice(0, limit);
      const remaining = Math.max(0, sitesInCategory.length - limit);

      toShow.forEach(s => content.appendChild(createSiteCard(s)));

      if (sitesInCategory.length > limit) {
        const btnContainer = document.createElement("div");
        btnContainer.className = "more-btn-container";
        if (isExpanded) {
          btnContainer.innerHTML = `<button class="collapse-btn" onclick="collapseSites('${category}')">ì ‘ê¸° â†‘</button>`;
        } else {
          btnContainer.innerHTML = `<button class="more-btn" onclick="expandSites('${category}')">ë”ë³´ê¸° (${remaining}ê°œ ë” ìˆìŒ) â†“</button>`;
        }
        content.appendChild(btnContainer);
      }
    } else {
      // ì¹´í…Œê³ ë¦¬ í•„í„°ê°€ ì „ì²´ or ì´ ì¹´í…Œê³ ë¦¬ê°€ ì„ íƒëœ ê²½ìš° ë¹ˆ ë©”ì‹œì§€ ë³´ì´ê¸°
      if (currentCategoryFilter === "all" || currentCategoryFilter === category) {
        section.style.display = "block";
        content.innerHTML = "<p style='color:#666;text-align:center;padding:20px;'>í•´ë‹¹ ì¡°ê±´ì˜ ì‚¬ì´íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
      } else {
        section.style.display = "none";
      }
    }
  });

  document.getElementById("noResults").style.display = hasResults ? "none" : "block";
  updateStats();
}

/* ë”ë³´ê¸°/ì ‘ê¸° */
function expandSites(category) { expandedCategories[category] = true; renderSites(); }
function collapseSites(category) { expandedCategories[category] = false; renderSites(); }

/* ===== í•„í„° íƒ­(ì¹´í…Œê³ ë¦¬ íƒ­) ìƒì„± & ì´ë²¤íŠ¸ ===== */
function buildCategoryTabs() {
  const tabs = document.getElementById("filterTabs");
  tabs.innerHTML = "";
  const allCats = getAllCategories();
  const keys = Object.keys(allCats);
  // 'ì „ì²´' íƒ­ ì¶”ê°€
  const allBtn = document.createElement("button");
  allBtn.className = "tab-btn active";
  allBtn.dataset.cat = "all";
  allBtn.textContent = "ì „ì²´";
  allBtn.addEventListener("click", e => {
    document.querySelectorAll("#filterTabs .tab-btn").forEach(b=>b.classList.remove("active"));
    e.currentTarget.classList.add("active");
    currentCategoryFilter = "all";
    expandedCategories = {};
    renderSites();
  });
  tabs.appendChild(allBtn);

  keys.forEach(k => {
    const btn = document.createElement("button");
    btn.className = "tab-btn";
    btn.dataset.cat = k;
    btn.textContent = `${allCats[k].icon} ${allCats[k].name}`;
    btn.addEventListener("click", e => {
      document.querySelectorAll("#filterTabs .tab-btn").forEach(b=>b.classList.remove("active"));
      e.currentTarget.classList.add("active");
      currentCategoryFilter = e.currentTarget.dataset.cat;
      expandedCategories = {};
      renderSites();
    });
    tabs.appendChild(btn);
  });
}

/* ===== í•„í„°/ê²€ìƒ‰ ì´ë²¤íŠ¸ ì—°ê²° ===== */
function setupFilters() {
  document.querySelectorAll("#ageFilter .filter-btn").forEach(btn => {
    btn.addEventListener("click", e => {
      document.querySelectorAll("#ageFilter .filter-btn").forEach(b=>b.classList.remove("active"));
      e.currentTarget.classList.add("active");
      currentAgeFilter = e.currentTarget.dataset.age;
      renderSites();
    });
  });

  document.getElementById("subjectFilter").addEventListener("change", e => {
    currentSubjectFilter = e.target.value;
    renderSites();
  });

  document.getElementById("searchInput").addEventListener("input", e => {
    currentSearchQuery = e.target.value;
    renderSites();
  });

  document.getElementById("darkToggle").addEventListener("click", () => {
    document.body.classList.toggle("dark");
  });

  document.getElementById("viewAllBtn").addEventListener("click", resetFilters);
}

/* ===== ì´ˆê¸°í™” & ìœ í‹¸ ===== */
function resetFilters() {
  currentAgeFilter = "all";
  currentCategoryFilter = "all";
  currentSubjectFilter = "all";
  currentSearchQuery = "";
  document.getElementById("searchInput").value = "";
  document.querySelector("#ageFilter .filter-btn[data-age='all']").classList.add("active");
  // reset other age buttons
  document.querySelectorAll("#ageFilter .filter-btn:not([data-age='all'])").forEach(b=>b.classList.remove("active"));
  document.getElementById("subjectFilter").value = "all";
  // reset tabs
  document.querySelectorAll("#filterTabs .tab-btn").forEach(b=>b.classList.remove("active"));
  document.querySelector("#filterTabs .tab-btn[data-cat='all']").classList.add("active");
  expandedCategories = {};
  renderSites();
}

function init() {
  renderCategorySections();
  buildCategoryTabs();
  setupFilters();
  renderSites();
}

/* DOMContentLoaded */
document.addEventListener("DOMContentLoaded", init);
</script>
<footer style="background:#333; color:#fff; text-align:center; padding:15px; margin-top:20px; font-size:14px;">
  Â© 2025 ë”±í•„ëª¨ | ì´ ì‚¬ì´íŠ¸ëŠ” Aië¥¼ ì‚¬ìš©í•´ ì œì‘ë˜ì—ˆê³  ê°œì¸ ì‚¬ìš©ì„ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.
  <br>
  ğŸ’¬ ë¬¸ì˜ ë° ë²„ê·¸ì‹ ê³ ëŠ” ë””ìŠ¤ì½”ë“œ ì„œë²„ì—ì„œ ë°›ìŠµë‹ˆë‹¤ (ì•„ì§ ë””ì½” ì„œë²„ ë§Œë“¤ì§€ ì•ŠìŒ)ğŸ‘‰ 
  <a href="https://discord.gg/ì—¬ê¸°ì—_ì´ˆëŒ€ì½”ë“œ" target="_blank" style="color:#4da3ff; font-weight:bold; text-decoration:none;">
    ë””ìŠ¤ì½”ë“œ ì°¸ì—¬í•˜ê¸°
  </a>
</footer>
</body>
</html>





